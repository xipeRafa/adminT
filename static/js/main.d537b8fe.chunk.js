(this.webpackJsonpauctioneer=this.webpackJsonpauctioneer||[]).push([[0],{139:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(20),r=n(44),s=n(13),i=n(72),o=(n(86),n(143),n(144),i.a.initializeApp({apiKey:"AIzaSyB2F4R4KkxUwb4GFKs7twRhiHS5i-i51D4",authDomain:"scopic-73416.firebaseapp.com",projectId:"scopic-73416",storageBucket:"scopic-73416.appspot.com",messagingSenderId:"475263107333",appId:"1:475263107333:web:27180a036864e16618376c"})),l=(i.a.firestore.FieldValue.serverTimestamp,o.firestore()),d=(o.storage(),o.auth()),u=n(3),j=Object(c.createContext)(),b=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(s.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(!0),b=Object(s.a)(o,2),O=b[0],x=b[1],h=Object(c.useState)(""),m=Object(s.a)(h,2),f=m[0],p=m[1];return Object(c.useEffect)((function(){return d.onAuthStateChanged((function(e){i(e),x(!1)}))}),[]),Object(c.useEffect)((function(){var e=setTimeout((function(){return p("")}),5e3);return function(){return clearTimeout(e)}}),[f]),Object(u.jsx)(j.Provider,{value:{currentUser:r,register:function(e,t){return d.createUserWithEmailAndPassword(e,t)},login:function(e,t){return d.signInWithEmailAndPassword(e,t)},logout:function(){return d.signOut()},bidAuction:function(e){return l.collection("auctions").doc(e).update({acuerdo:!0})},noteContext:function(e,t){return l.collection("auctions").doc(e).update({note:t})},endAuction:function(e){return l.collection("auctions").doc(e).delete()},globalMsg:f},children:!O&&t})},O=function(e){var t=e.item,n=Object(c.useContext)(j).currentUser,a=new Date(t.duration).toLocaleTimeString("es-CL"),r=new Date(t.duration).toLocaleDateString("es-CL",{weekday:"short",year:"numeric",month:"short",day:"numeric"});return Object(u.jsx)("div",{className:"col",children:n&&Object(u.jsx)("div",{className:"card shadow-sm",children:Object(u.jsxs)("div",{className:"card-body p-4 py-2",children:[Object(u.jsxs)("div",{className:"border border-success row",children:[Object(u.jsx)("span",{className:"bg-success p-1 col-md-3",children:Object(u.jsxs)("span",{className:"text-white px-2",children:[" ",t.categorie," "]})}),Object(u.jsxs)("span",{className:"p-1 col-md-2",children:[Object(u.jsx)("span",{className:"text-secondary ",children:"KL "})," ",t.taxista]}),Object(u.jsxs)("span",{className:" p-1 col-md-2",children:[Object(u.jsx)("span",{className:"text-secondary ",children:"Unidad "})," ",t.unidad]}),Object(u.jsx)("span",{className:"col-md-3 p-1",children:Object(u.jsxs)("span",{children:[r,", ",a.slice(0,-3)]})}),Object(u.jsxs)("span",{className:" col-md-2 p-1",children:[Object(u.jsx)("span",{className:"text-secondary ",children:"Costo"})," ",t.costo]})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"text-secondary",children:"Encargado"})," ",t.email.slice(0,-10)]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"text-secondary",children:"Descripci\xf3n"})," ",t.desc]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"text-secondary",children:"Comentarios"})," ",null===t||void 0===t?void 0:t.coments]})]})})})},x=n(73),h=n.n(x),m=(n(90),n(74)),f=(n(91),n(78));Object(x.registerLocale)("es",f.a);var p=function(){var e=Object(c.useContext)(j),t=e.currentUser,n=e.globalMsg,a=function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){var t=l.collection(e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id}))})),r(t)}));return function(){return t()}}),[e]),{docs:a}}("auctions").docs,i=Object(c.useState)(),o=Object(s.a)(i,2),d=o[0],b=o[1],x=a.filter((function(e){return e.unidad===d}));console.log(x);var f=x.reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.costo)}),0).toFixed(2),p=x.filter((function(e){return"Mantenimiento"===e.categorie})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.costo)}),0).toFixed(2),v=x.filter((function(e){return"Reparacion"===e.categorie})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.costo)}),0).toFixed(2),g=x.filter((function(e){return"Choque"===e.categorie})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.costo)}),0).toFixed(2),N=x.filter((function(e){return"Llantas"===e.categorie})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.costo)}),0).toFixed(2),y=Object(c.useState)(),w=Object(s.a)(y,2),C=w[0],S=w[1],k=Object(c.useState)(),L=Object(s.a)(k,2),E=L[0],F=L[1],R=Object(c.useState)([]),D=Object(s.a)(R,2),A=D[0],M=D[1],T=A.filter((function(e){return e})).length,I=Object(c.useState)(),q=Object(s.a)(I,2),P=q[0],U=q[1],B=Object(c.useState)([]),G=Object(s.a)(B,2),$=(G[0],G[1]),H=Object(c.useState)(),K=Object(s.a)(H,2),z=K[0],J=K[1],W=Object(c.useState)([]),V=Object(s.a)(W,2),Q=V[0],X=V[1],Y=null===z||void 0===z?void 0:z.sort((function(e,t){return t.duration-e.duration})),Z=Object(c.useState)(!0),_=Object(s.a)(Z,2),ee=_[0],te=_[1],ne=Object(c.useState)(!0),ce=Object(s.a)(ne,2),ae=ce[0],re=ce[1],se=Object(c.useState)(!0),ie=Object(s.a)(se,2),oe=ie[0],le=ie[1],de=Object(c.useState)(!0),ue=Object(s.a)(de,2),je=ue[0],be=ue[1],Oe=Object(c.useState)([]),xe=Object(s.a)(Oe,2),he=xe[0],me=xe[1];function fe(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}Object(c.useEffect)((function(){for(var e=function(e){var t=Y.filter((function(t){return t.categorie!==he[e]}));Y=t},t=0;t<he.length;t++)e(t);X(Y)}),[he,ee,ae,oe,je]);var pe=A;z&&(pe=z.filter((function(e){return!1!==e})),Q.length>0&&(pe=Q.filter((function(e){return!1!==e}))));var ve=[];return A.length>0&&(ve=pe),Object(u.jsxs)("div",{className:"container-fluid ",children:[Object(u.jsx)("div",{style:{zIndex:"9999999"},className:"text-center w-50 position-fixed top-10 start-50 translate-middle",children:n&&Object(u.jsx)(Alert,{variant:"danger",children:n})}),t&&Object(u.jsxs)("div",{className:"row bg-secondary pt-4 ",children:[Object(u.jsxs)("div",{className:A.length>0?"text-white bg-primary mb-3 p-1 row":"d-none",children:[Object(u.jsxs)("span",{style:{marginLeft:"20px"},className:"col-md-4",children:[Object(u.jsx)("span",{className:"p-1",children:T})," Trabajos el Dia : ",C]}),Object(u.jsxs)("span",{style:{marginLeft:"50px"},className:(null===z||void 0===z?void 0:z.length)>0?"col-md-3":"d-none",children:[Object(u.jsxs)("span",{className:"bg-dark p-1",children:["$ ",null===z||void 0===z?void 0:z.filter((function(e){return!1!==e})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.costo)}),0).toFixed(2)]})," ","En taller para la unidad ",P]}),Object(u.jsxs)("span",{style:{marginLeft:"50px"},className:(null===Q||void 0===Q?void 0:Q.length)>0?"col-md-3":"d-none",children:[Object(u.jsxs)("span",{className:"bg-dark p-1",children:["$ ",null===Q||void 0===Q?void 0:Q.filter((function(e){return!1!==e})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.costo)}),0).toFixed(2)]})," ","En servicios Mostrados"]})]}),Object(u.jsx)("div",{className:"col-1"}),Object(u.jsx)("div",{className:(null===z||void 0===z?void 0:z.length)>0?"d-none":"col-md-3 text-center mb-4 me-5",children:Object(u.jsx)(h.a,{selected:E,onChange:function(e){F(e);var t=null===e||void 0===e?void 0:e.getTime(),n=t+864e5,c=new Date(t).toLocaleDateString("es-CL",{weekday:"short",year:"numeric",month:"short",day:"numeric"});S(c);var r=a.map((function(e,c){if(e.duration>t&&e.duration<n)return e}));M(r)},locale:"es",className:"pickers mb-3 form-control mt-2 w-100 bg-secondary",dateFormat:"dd 'de' MMMM 'de' yyyy"})}),Object(u.jsx)("div",{className:(null===A||void 0===A?void 0:A.length)>0?"col-md-1 fs-2 row-back":"d-none",onClick:function(){return location.reload()},children:"\ud83d\udd19"}),Object(u.jsx)("div",{className:"col-md-3 mb-4 text-center",children:Object(u.jsx)("form",{onSubmit:function(e){e.preventDefault(),$(P);var t=A.filter((function(e){return void 0!==e})).map((function(e){return e.unidad===P&&e}));J(t)},children:Object(u.jsx)("input",{type:"text",onChange:function(e){U(e.target.value),X([])},value:P,className:A.length>0?"w-100 form-control mt-2":"d-none",style:{width:"0"},placeholder:"Buscar por Unidad"})})}),Object(u.jsx)("div",{className:"col-1"}),Object(u.jsx)("div",{className:(null===z||void 0===z?void 0:z.length)>0?"col-md-3 mb-3 ":"d-none",children:Object(u.jsxs)("div",{className:"w-100 mt-0",children:[Object(u.jsxs)("label",{className:"text-white mb-3 mx-4",children:[Object(u.jsx)("input",{type:"checkbox",className:"m-1",value:"Mantenimiento",onChange:function(e){return function(e){te(!ee),ee?me([].concat(Object(r.a)(he),[e.target.value])):fe(he,e.target.value)}(e)},checked:ee}),"Mantenimiento"]}),Object(u.jsxs)("label",{className:"text-white mb-3",children:[Object(u.jsx)("input",{type:"checkbox",className:"m-1",value:"Reparacion",onChange:function(e){return function(e){re(!ae),ae?me([].concat(Object(r.a)(he),[e.target.value])):fe(he,e.target.value)}(e)},checked:ae}),"Reparacion"]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{className:"text-white mx-4",children:[Object(u.jsx)("input",{type:"checkbox",className:"m-1",value:"Choque",onChange:function(e){return function(e){le(!oe),oe?me([].concat(Object(r.a)(he),[e.target.value])):fe(he,e.target.value)}(e)},checked:oe}),"Choque"]}),Object(u.jsxs)("label",{className:"text-white mx-4",children:[Object(u.jsx)("input",{type:"checkbox",className:"m-1",value:"Llantas",onChange:function(e){return function(e){be(!je),je?me([].concat(Object(r.a)(he),[e.target.value])):fe(he,e.target.value)}(e)},checked:je}),"LLantas"]})]})})]}),Object(u.jsx)("form",{className:"row",onSubmit:function(e){e.preventDefault()},children:Object(u.jsx)("input",{type:"text",className:"w-100",onChange:function(e){b(e.target.value)}})}),Object(u.jsxs)("div",{style:{backgroundColor:"rgba(111,222,190, .3)"},className:x.length>0?"mt-2 px-3 pt-2 pb-1":"d-none",children:[Object(u.jsxs)("p",{children:["Mantenimientos $",p]}),Object(u.jsxs)("p",{children:["Reparaciones $",v]}),Object(u.jsxs)("p",{children:["Choques $",g]}),Object(u.jsxs)("p",{children:["Llantas $",N]}),Object(u.jsx)("br",{}),Object(u.jsxs)("p",{children:["Total ",Object(u.jsx)("span",{className:"bg-dark text-white p-1",children:f})," Por Todo el A\xf1o 2022"]})]}),a&&Object(u.jsx)("div",{className:"row row-cols-1 p-5 g-3 border mt-1 ",children:ve.filter((function(e){return void 0!==e})).map((function(e){return Object(u.jsx)(O,{item:e},e.id)}))})]})},v=(n.p,n(36)),g=n.n(v),N=n(52),y=n(150),w=n(152),C=n(151),S=n(149),k=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),o=i[0],l=i[1],d=Object(c.useRef)(),b=Object(c.useRef)(),O=Object(c.useContext)(j).login,x=function(){return a(!1)},h=function(){var e=Object(N.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),l(""),e.prev=2,e.next=5,O(d.current.value,b.current.value);case 5:x(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),l("Invalid login");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{onClick:function(){return a(!0)},className:"btn mx-2",children:"Entrar"}),Object(u.jsx)(y.a,{centered:!0,show:n,onHide:x,children:Object(u.jsxs)("form",{onSubmit:h,children:[Object(u.jsx)(y.a.Header,{children:Object(u.jsx)(y.a.Title,{children:"Entrar"})}),Object(u.jsxs)(y.a.Body,{children:[o&&Object(u.jsx)(w.a,{variant:"danger",children:o}),Object(u.jsxs)(C.a.Group,{children:[Object(u.jsx)(C.a.Label,{children:"Email "}),Object(u.jsx)(C.a.Control,{type:"email",required:!0,ref:d})]}),Object(u.jsxs)(C.a.Group,{children:[Object(u.jsx)(C.a.Label,{children:"Password"}),Object(u.jsx)(C.a.Control,{type:"password",required:!0,ref:b})]})]}),Object(u.jsxs)(y.a.Footer,{children:[Object(u.jsx)(S.a,{variant:"secondary",onClick:x,children:"Cancelar"}),Object(u.jsx)(S.a,{variant:"primary",type:"submit",children:"Entrar"})]})]})})]})},L=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),o=i[0],l=i[1],d=Object(c.useRef)(),b=Object(c.useRef)(),O=Object(c.useRef)(),x=Object(c.useContext)(j).register,h=function(){return a(!1)},m=function(){var e=Object(N.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),l(""),b.current.value===O.current.value){e.next=4;break}return e.abrupt("return",l("Passwords does not match"));case 4:return e.prev=4,e.next=7,x(d.current.value,b.current.value);case 7:h(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),l(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{onClick:function(){return a(!0)},className:"btn mx-2 d-none",children:"Registro"}),Object(u.jsx)(y.a,{centered:!0,show:n,onHide:h,children:Object(u.jsxs)("form",{onSubmit:m,children:[Object(u.jsx)(y.a.Header,{children:Object(u.jsx)(y.a.Title,{children:"Registro"})}),Object(u.jsxs)(y.a.Body,{children:[o&&Object(u.jsx)(w.a,{variant:"danger",children:o}),Object(u.jsxs)(C.a.Group,{children:[Object(u.jsx)(C.a.Label,{children:"Email"}),Object(u.jsx)(C.a.Control,{type:"email",required:!0,ref:d})]}),Object(u.jsxs)(C.a.Group,{children:[Object(u.jsx)(C.a.Label,{children:"Password"}),Object(u.jsx)(C.a.Control,{type:"password",required:!0,ref:b})]}),Object(u.jsxs)(C.a.Group,{children:[Object(u.jsx)(C.a.Label,{children:"Confirmar Password"}),Object(u.jsx)(C.a.Control,{type:"password",required:!0,ref:O})]})]}),Object(u.jsxs)(y.a.Footer,{children:[Object(u.jsx)(S.a,{variant:"secondary",onClick:h,children:"Cancelar"}),Object(u.jsx)(S.a,{variant:"primary",type:"submit",children:"Registrar"})]})]})})]})},E=function(){var e=Object(c.useContext)(j),t=e.currentUser,n=e.logout;return Object(u.jsx)("nav",{className:"container-fluid navbar bg-danger navbar-light",children:Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsx)("div",{className:"navbar-brand text-white",children:" TALLER ADMIN"}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsx)("div",{className:"col",children:t?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"btn mx-2 disabled",children:t.email}),Object(u.jsx)("div",{onClick:function(){return n()},className:"btn  mx-2",children:"SALIR"})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(k,{}),Object(u.jsx)(L,{})]})})})]})})},F=function(){return Object(u.jsxs)(b,{children:[Object(u.jsx)(E,{}),Object(u.jsx)(p,{})]})};n(137);Object(a.render)(Object(u.jsx)(F,{}),document.getElementById("root"))},91:function(e,t,n){}},[[139,1,2]]]);
//# sourceMappingURL=main.d537b8fe.chunk.js.map